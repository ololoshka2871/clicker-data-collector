<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Сборщик данных тестера Rk - конфигурация</title>
    <link rel="icon" type="image/x-icon" href="/static/images/favicon.ico">

    <!-- Common styles -->
    <link rel="stylesheet" href="/lib/bootstrap/css/bootstrap.css" />
    <link rel="stylesheet" href="/lib/font-awesome/css/all.min.css" />

    <!-- specific styles -->
    <link rel="stylesheet" href="/static/css/docs.min.css" />

    <!-- main style -->
    <link rel="stylesheet" href="/static/css/site.css" />
</head>

<body>
    <header>
        <nav
            class="navbar navbar-expand-custom navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-1 navbar-custom">
            <div class="container">
                <!-- <a class="navbar-brand" href="/">
                    <img src="/static/images/rez.png" height="40" width="160" style="margin-top:0px;">
                </a> -->
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target=".navbar-collapse"
                    aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="navbar-collapse collapse d-sm-inline-flex flex-sm-row-reverse">
                    <ul class="navbar-nav flex-grow-1">
                        <li class="nav-item" id="nav-bar-work">
                            <a class="nav-link" href="/work"><i class="fas fa-ruler-horizontal"></i> Работа</a>
                        </li>
                        <li class="nav-item active" id="nav-bar-config">
                            <a class="nav-link" href="/config"><i class="fas fa-cogs"></i> Настройка</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <div class="container">
        <main role="main" class="pb-3">
            <!--@RenderBody()-->
            <h4>Текущая конфигурация</h4>
            <p>Файл: <code class="highlighter-rouge">{{ config_file }}</code></p>
            <hr />
            <div class="bd-callout bd-callout-danger">
                <h4>Настраиваемое</h4>
                <table class="table table-sm table-bordered table-hover">
                    {% macro table_row_editable_float(name, param, value, float=false, mu='') -%}
                    <tr>
                        <th scope="row"><code class="text-muted">{{ param }}</code></th>
                        <td>{{name}}</td>
                        <td>
                            {% if float %}
                            <input type="text" class="form-control adj-input" name="{{ param }}"
                                placeholder="{{ value|float2dgt }}" value="{{ value|float2dgt }}">
                            {% else %}
                            <input type="text" class="form-control adj-input" name="{{ param }}"
                                placeholder="{{ value }}" value="{{ value }}">
                            {% endif %}
                        </td>
                        <td>{{mu}}</td>
                    </tr>
                    {% endmacro -%}
                    <thead>
                        <tr>
                            <th scope="col">Обозначение</th>
                            <th scope="col">Параметр</th>
                            <th scope="col">Значение</th>
                            <th scope="col">ед. изм.</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{ table_row_editable_float('Последовательный Порт', 'RkMeterPort', config.RkMeterPort) }}
                        {{ table_row_editable_float('Веб-порт', 'WebPort', config.WebPort) }}
                        {{ table_row_editable_float('Измерительных цыклов', 'Cycles', config.Cycles, mu='шт.') }}
                    </tbody>
                </table>
            </div>
        </main>
    </div>

    <!-- Common scripts -->
    <script src="/lib/jquery/jquery.min.js"></script>
    <script src="/lib/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="/lib/font-awesome/js/all.min.js"></script>
    <script src="/lib/jquery-noty/packaged/jquery.noty.packaged.min.js"></script>
    <script src="/static/js/common.js"></script>

    <!-- Specific scripts -->
    <script src="/static/js/config.js"></script>
</body>

</html>